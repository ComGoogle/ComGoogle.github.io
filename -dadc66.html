<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<!-- iOS Safari -->
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<!-- Chrome, Firefox OS and Opera Status Bar Color -->
<meta name="theme-color" content="#FFFFFF">
<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css">
<link rel="stylesheet" type="text/css"
  href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.19.0/themes/prism.min.css">
<link rel="stylesheet" type="text/css" href="css/SourceSansPro.css">
<link rel="stylesheet" type="text/css" href="css/theme.css">
<link rel="stylesheet" type="text/css" href="css/notablog.css">
<!-- Favicon -->

  <link rel="shortcut icon" href="https://www.notion.so/signed/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2Fdd719a06-a4c3-47e4-9b49-3a2adc703adc%2F10daba46-51b9-474a-9c22-1222e6e158b2%2FPMI74K6FO73MCR770JT.png?table=collection&amp;id=51a399fe-3ada-47de-a312-8e2ad5e56579">

<style>
  :root {
    font-size: 20px;
  }
</style>
  <title>计算机系统课程作业一&nbsp;|&nbsp;这儿是什么地方</title>
  <meta property="og:type" content="blog">
  <meta property="og:title" content="计算机系统课程作业一">
  
  
    <meta property="og:image" content="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text text-anchor=%22middle%22 dominant-baseline=%22middle%22 x=%2250%22 y=%2255%22 font-size=%2280%22&gt;📗&lt;/text&gt;&lt;/svg&gt;">
  
  <style>
    .DateTagBar {
      margin-top: 1.0rem;
    }
  </style>
</head>

<body>
  <nav class="Navbar">
  <a href="index.html">
    <div class="Navbar__Btn">
      
        <span><img class="inline-img-icon" src="https://www.notion.so/signed/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2Fdd719a06-a4c3-47e4-9b49-3a2adc703adc%2F10daba46-51b9-474a-9c22-1222e6e158b2%2FPMI74K6FO73MCR770JT.png?table=collection&amp;id=51a399fe-3ada-47de-a312-8e2ad5e56579"></span>&nbsp;
      
      <span>SixGoogle</span>
    </div>
  </a>
  
    
  
    
  
    
      <span class="Navbar__Delim">&centerdot;</span>
      <a href="about.html">
        <div class="Navbar__Btn">
          
            <span><img class="inline-img-icon" src="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text text-anchor=%22middle%22 dominant-baseline=%22middle%22 x=%2250%22 y=%2255%22 font-size=%2280%22&gt;😀&lt;/text&gt;&lt;/svg&gt;"></span>&nbsp;
          
          <span>About me?</span>
        </div>
      </a>
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
</nav>

  <header class="Header">
    
    <div class="Header__Spacer Header__Spacer--NoCover">
    </div>
    
      <div class="Header__Icon">
        <span><img class="inline-img-icon" src="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text text-anchor=%22middle%22 dominant-baseline=%22middle%22 x=%2250%22 y=%2255%22 font-size=%2280%22&gt;📗&lt;/text&gt;&lt;/svg&gt;"></span>
      </div>
    
    <h1 class="Header__Title">计算机系统课程作业一</h1>
    
  </header>
  <article id="https://www.notion.so/dadc66dc964b4dcfb81e0a47cb5f464b" class="PageRoot"><div id="https://www.notion.so/5db707e85f2c4aa583fa77f992c33d94" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">202208060120 信安2201 李广</span></span></p></div><div id="https://www.notion.so/eae9ae53baea4e43acda5a446bf91f7f" class="Divider"></div><div id="https://www.notion.so/3f7815bb3cfd4ed28a3e48fba74f446a" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">**2.61写一个C表达式，在下列描述的条件下产生1，而在其他情况下得到0。假设x是int类型。</strong></span></span></p></div><div id="https://www.notion.so/b259583de673472eb835352f644d84f0" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">代码应该遵循位级整数编码规则，另外还有一个限制，你不能使用相等(==)和不相等(!=)测试</strong></span><span class="SemanticString">。</span></span></p></div><div id="https://www.notion.so/5e35b927d4d44517af1db4758304f8e4" class="Divider"></div><div id="https://www.notion.so/f01a08feef284aea9d4a3566f2780945" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">A.x的任何位都等于1。
</strong></span><span class="SemanticString">考虑到当任何未都为0时，即B所描述的情况下，x表示的整数为0，对0取非将得到1，故考虑对x先取反，当x全为1，取反后全0，取反后取非即可判断x是否为全位都是1.即表达式为</span><span class="SemanticString"><span class="SemanticString__Fragment SemanticString__Fragment--Unknown">!~x</span></span></span></p></div><div id="https://www.notion.so/599d647306d6438896fbd2f81802589c" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">B.x的任何位都等于0。
</strong></span><span class="SemanticString">由A中所述可得，表达式为</span><span class="SemanticString"><span class="SemanticString__Fragment SemanticString__Fragment--Unknown">!x</span></span></span></p></div><div id="https://www.notion.so/d2c0b3f61498400c81e946108ce4d125" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">C.x的最高有效字节中的位都等于1。
</strong></span><span class="SemanticString">考虑对x进行算术右移24位，若x最高有效字节位全为1，此时的x将会是任何位都为1，即表达式为</span><span class="SemanticString"><span class="SemanticString__Fragment SemanticString__Fragment--Unknown">!~(x&gt;&gt;24</span></span><span class="SemanticString">) ，进一步的更通用的形式是</span><span class="SemanticString"><span class="SemanticString__Fragment SemanticString__Fragment--Unknown">!~</span></span><span class="SemanticString"><span class="SemanticString__Fragment SemanticString__Fragment--Unknown"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">(x&gt;&gt;((sizeof(int)-1)&lt;&lt;3))</strong></span></span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold"> ，</strong></span><span class="SemanticString">这样得到的位数是将字节数减去1后转换为位数（因为1字节=8位，所以左移3位相当于乘以8），能够自适应不同大小的</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">int</strong></span><span class="SemanticString">类型。</span></span></p></div><div id="https://www.notion.so/1c3f587c2cac45f68777f01a98fcedce" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">D.x的最低有效字节中的位都等于0。
</strong></span><span class="SemanticString">只考虑最低位的情况时，将一个最低位全1的数0xFF与x进行按位与操作，最终若结果为位全0，则正确，即表达式为</span><span class="SemanticString"><span class="SemanticString__Fragment SemanticString__Fragment--Unknown">!(x&amp;0xFF)</span></span></span></p></div><div id="https://www.notion.so/a6ad649656964ce3b9f63996e54e51ae" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><div id="https://www.notion.so/5ef3920bd54348538fa8c0a00a16f960" class="Divider"></div><div id="https://www.notion.so/61cf606dd4184cd59478d5f1abb2c7f9" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">*2.71你刚刚开始在一家公司工作，他们要实现一组过程来操作一个数据结构，要将4个有符号字节封装成一个32位unsigned。一个字中的字节从0(最低有效字节）编号到3(最高有效字节)。分配给你的任务是:为一个使用补码运算和算术右移的机器编写一个具有如下原型的函数:
</strong></span><span class="SemanticString"><em class="SemanticString__Fragment SemanticString__Fragment--Italic"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">/ * Declaration of data type where 4 bytes are packedinto an unsigned */
typedef unsigned packed_t;</strong></em></span></span></p></div><div id="https://www.notion.so/58849f6fc8a94bd1987d4c20adabad80" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><em class="SemanticString__Fragment SemanticString__Fragment--Italic"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">/ * Extract byte from word. Return as signed integer */
int xbyte(packed_t word， int bytenum) ;</strong></em></span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">
也就是说，函数会抽取出指定的字节，再把它符号扩展为一个32位 int。你的前任（因为水平不够高而被解雇了）编写了下面的代码:</strong></span></span></p></div><div id="https://www.notion.so/6c4cfb7a3859476588be88d653a1461e" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold"><em class="SemanticString__Fragment SemanticString__Fragment--Italic">/* Failed attempt at xbyte */
int xbyte(packed_t word，int bytenum)
{
return (word &gt;&gt; (bytenum &lt;&lt; 3)) &amp; 0xFF ;
}</em></strong></span></span></p></div><div id="https://www.notion.so/24fef3f4067a48bc9d912bebf9a1c12c" class="Divider"></div><div id="https://www.notion.so/0a6f52a0cdbe4e2f99eaf480d021294f" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">A.这段代码错在哪里?
</strong></span><span class="SemanticString">由于每个字节表示的都是有符号数，当直接通过</span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold"><em class="SemanticString__Fragment SemanticString__Fragment--Italic">(word &gt;&gt; (bytenum &lt;&lt; 3)) &amp; 0xFF</em></strong></code></span><span class="SemanticString">提取指定字节并通过有符号int输出时，若提取的字节符号位为1，其本意为一个负数，当转化后会变为一个正数，因为在int中的符号位为0，为解决这个问题，应当进行符号扩展，让转化后的有符号int也拥有提取的字节的符号。</span></span></p></div><div id="https://www.notion.so/7e5a65307adb49259a4ce5f694a08a7c" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">B.给出函数的正确实现，·只能使用左右移位和一个减法。</strong></span></span></p></div><pre id="https://www.notion.so/b4b08aa3011d438088399694b50ff2b7" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token keyword">int</span> <span class="token function">xbyte</span><span class="token punctuation">(</span><span class="token class-name">packed_t</span> word，<span class="token keyword">int</span> bytenum<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token keyword">int</span> temp <span class="token operator">=</span> <span class="token punctuation">(</span>word <span class="token operator">>></span> <span class="token punctuation">(</span>bytenum <span class="token operator">&lt;&lt;</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span> <span class="token number">0xFF</span> <span class="token punctuation">;</span>
	<span class="token keyword">int</span> shift <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token number">3</span> <span class="token punctuation">;</span>
	<span class="token keyword">return</span> temp <span class="token operator">&lt;&lt;</span> shift <span class="token operator">>></span> shift <span class="token punctuation">;</span>
<span class="token punctuation">}</span></span></span></span></code></pre><div id="https://www.notion.so/9ebc8fe6e9ee426495746609fb2bef10" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">将原输出作为一个中间结果，通过对原输出进行左移到最高字节后，算术右移回到最低位，这样可以完成符号的扩展，获得正确输出。</span></span></p></div><div id="https://www.notion.so/03cdf3dc3d904f519d2165d2725fed2e" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">一种更简化的思路是一开始就将所需字节左移到最高字节，然后在通过算术右移回最低位，</span></span></p></div><pre id="https://www.notion.so/5c7ee8e7d50d4bf5b5e8a7b2ab2bc2a2" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token keyword">int</span> <span class="token function">xbyte</span><span class="token punctuation">(</span><span class="token class-name">packed_t</span> word<span class="token punctuation">,</span> <span class="token keyword">int</span> bytenum<span class="token punctuation">)</span> 
<span class="token punctuation">{</span>
	<span class="token keyword">int</span> temp <span class="token operator">=</span> word <span class="token operator">&lt;&lt;</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">3</span> <span class="token operator">-</span> bytenum<span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">;</span>
	<span class="token keyword">return</span> temp <span class="token operator">>></span> <span class="token number">24</span> <span class="token punctuation">;</span>
 <span class="token punctuation">}</span></span></span></span></code></pre><div id="https://www.notion.so/85d97d144ae244bdb5e187ae695ca6f9" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><div id="https://www.notion.so/d2050b1fe8144960a5f553963f2c18a9" class="Divider"></div><div id="https://www.notion.so/ccc4b4912c264c4bb4834a194b28bed4" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">**2.87考虑下面两个基于IEEE浮点格式的9位浮点表示。</strong></span></span></p></div><div id="https://www.notion.so/b80b5867e62544eabaf1375ecc58cab4" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">1.格式A</strong></span></span></p></div><ul class="BulletedListWrapper"><li id="https://www.notion.so/0f25d2a5213943ae9d9da9fe73cc12d7" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">有一个符号位。</strong></span></span></li><li id="https://www.notion.so/525c63c771204626970e26948816deb0" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">有k=5个阶码位。阶码偏置量是15。</strong></span></span></li><li id="https://www.notion.so/99024d340ae34803bdc8dc9d4eefc296" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">有n=3个小数位。</strong></span></span></li></ul><div id="https://www.notion.so/fd1683eef377453097b3156d7512ab07" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">2.格式B</strong></span></span></p></div><ul class="BulletedListWrapper"><li id="https://www.notion.so/ee868ba8fce74788bd56c30da9dfdcc4" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">有一个符号位。</strong></span></span></li><li id="https://www.notion.so/5c7e7e8adcee48e49d675cf8246523a6" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">有k=4个阶码位。阶码偏置量是7。</strong></span></span></li><li id="https://www.notion.so/dfdf0342d5c04fab91c3e778a4fd1d5a" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">有n=4个小数位。</strong></span></span></li></ul><div id="https://www.notion.so/a68975ac5e3847b09e9610c9ddbd033d" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">下面给出了一些格式A表示的位模式，你的任务是把它们转换成最接近的格式B表示的值。如果需要舍入，你要向</strong></span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold"><span class="SemanticString__Fragment SemanticString__Fragment--Math" data-latex="+∞"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>+</mo><mi mathvariant="normal">∞</mi></mrow><annotation encoding="application/x-tex">+∞</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord">+</span><span class="mord">∞</span></span></span></span></span></strong></span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">舍入。另外，给出用格式A和格式B表示的位模式对应的值。要么是整数(例如，17)，要么是小数（例如，17/64或17/</strong></span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold"><span class="SemanticString__Fragment SemanticString__Fragment--Math" data-latex="2^6"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mn>6</mn></msup></mrow><annotation encoding="application/x-tex">2^6</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">6</span></span></span></span></span></span></span></span></span></span></span></span></strong></span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">)。</strong></span></span></p></div><div id="https://www.notion.so/c03eaa67793142168c12634cc70c42e9" class="Divider"></div><div id="https://www.notion.so/528c548501334ebd9507ef3bd8f240b4" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">根据浮点数计算规则得到如下结果：</span></span></p></div><div id="https://www.notion.so/3fada8a69dbf409c9e15a601cb164a8f" class="Image Image--PageWidth"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2Fdd719a06-a4c3-47e4-9b49-3a2adc703adc%2Fe2307e57-dfce-422a-8cc2-687b3e1471fb%2FUntitled.jpeg?width=576&amp;table=block&amp;id=3fada8a6-9dbf-409c-9e15-a601cb164a8f"><img src="https://www.notion.so/signed/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2Fdd719a06-a4c3-47e4-9b49-3a2adc703adc%2Fe2307e57-dfce-422a-8cc2-687b3e1471fb%2FUntitled.jpeg?width=576&amp;table=block&amp;id=3fada8a6-9dbf-409c-9e15-a601cb164a8f" style="width:100%"/></a><figcaption><span class="SemanticStringArray"></span></figcaption></figure></div><div id="https://www.notion.so/ed7aa80d80554632a10298ae138120b0" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><div id="https://www.notion.so/0afdc716b25c44e89a68a23d314616ea" class="Divider"></div><div id="https://www.notion.so/c68c57c18d7048d4af444f792d6143b7" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">*2.88我们在一个int类型为32位补码表示的机器上运行程序。float类型的值使用32位IEEE格式，而double类型的值使用64位IEEE格式。
我们产生随机整数x、y和z，并且把它们转换成double类型的值:</strong></span></span></p></div><div id="https://www.notion.so/439cb02baa5f462fb4e3b578ffff81b5" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><em class="SemanticString__Fragment SemanticString__Fragment--Italic"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">/* Create some arbitrary values */
int x = random();
int y = random();
int z = random();
/* Convert to double */
double dx = (double) x;
double dy = (double) y;
double dz = (double) z;</strong></em></span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">
对于下列的每个C表达式，你要指出表达式是否总是为1。如果它总是为1，描述其中的数学原理。否则，列举出使它为0的参数的例子。请注意，不能使用IA32机器运行GCC来测试你的答案，因为对于float和 double，它使用的都是80位的扩展精度表示。</strong></span></span></p></div><div id="https://www.notion.so/eb89e93e4ec94b459b7a29c0d7cdda11" class="Divider"></div><div id="https://www.notion.so/1a823dc321cf43b98d9aa019a7d1928b" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">A. (double)(float) x == dx
</strong></span><span class="SemanticString"><span class="SemanticString__Fragment SemanticString__Fragment--Unknown">错误</span></span><span class="SemanticString">，当int转float时可能发生舍入，举例：</span></span></p></div><div id="https://www.notion.so/311d52615e0e4c9280b5b5c467a7a06d" class="ColumnList"><div id="https://www.notion.so/17dfcbfd650748f59020589a228e90ae" class="Column" style="width:calc((100% - var(--column-spacing) * 1) * 0.5)"><div id="https://www.notion.so/a48cb46fcd1b4b46a000b754a979f1f4" class="Image Image--Normal"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2Fdd719a06-a4c3-47e4-9b49-3a2adc703adc%2Fa939db64-3b03-4c17-94e8-47304b86501c%2FUntitled.png?width=346&amp;table=block&amp;id=a48cb46f-cd1b-4b46-a000-b754a979f1f4"><img src="https://www.notion.so/signed/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2Fdd719a06-a4c3-47e4-9b49-3a2adc703adc%2Fa939db64-3b03-4c17-94e8-47304b86501c%2FUntitled.png?width=346&amp;table=block&amp;id=a48cb46f-cd1b-4b46-a000-b754a979f1f4" style="width:346px"/></a><figcaption><span class="SemanticStringArray"></span></figcaption></figure></div></div><div id="https://www.notion.so/0dd29c43ead14d4da5fee8b1f1c3be6f" class="Column" style="width:calc((100% - var(--column-spacing) * 1) * 0.5)"><div id="https://www.notion.so/ccf5330ffac44b2d813214fd8bb90c1e" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">得到输出如下：</span></span></p></div><div id="https://www.notion.so/b4792d6e484b4787b000f599243a9506" class="Image Image--Normal"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2Fdd719a06-a4c3-47e4-9b49-3a2adc703adc%2F48ba7bd2-8f99-4a31-a3b8-ff365cdc8b37%2FUntitled.png?width=239&amp;table=block&amp;id=b4792d6e-484b-4787-b000-f599243a9506"><img src="https://www.notion.so/signed/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2Fdd719a06-a4c3-47e4-9b49-3a2adc703adc%2F48ba7bd2-8f99-4a31-a3b8-ff365cdc8b37%2FUntitled.png?width=239&amp;table=block&amp;id=b4792d6e-484b-4787-b000-f599243a9506" style="width:239px"/></a><figcaption><span class="SemanticStringArray"></span></figcaption></figure></div></div></div><div id="https://www.notion.so/5031afa8a6de4e799d4e1ad88d2bd397" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">B. dx + dy == (double)(x+y)
</strong></span><span class="SemanticString"><span class="SemanticString__Fragment SemanticString__Fragment--Unknown">错误</span></span><span class="SemanticString">，整数x+y可能会溢出，溢出后再转化比较结果错误，举例：</span></span></p></div><div id="https://www.notion.so/0db87caede274a719c919e9aa4f6cdc5" class="ColumnList"><div id="https://www.notion.so/197933eb05ba4fc3b27c35cb27155acf" class="Column" style="width:calc((100% - var(--column-spacing) * 1) * 0.5)"><div id="https://www.notion.so/bd7bd2daa1b543ecb64ce0624d935af5" class="Image Image--Normal"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2Fdd719a06-a4c3-47e4-9b49-3a2adc703adc%2F875413fa-1e31-4c28-87e5-c87c0f53b000%2FUntitled.png?width=487&amp;table=block&amp;id=bd7bd2da-a1b5-43ec-b64c-e0624d935af5"><img src="https://www.notion.so/signed/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2Fdd719a06-a4c3-47e4-9b49-3a2adc703adc%2F875413fa-1e31-4c28-87e5-c87c0f53b000%2FUntitled.png?width=487&amp;table=block&amp;id=bd7bd2da-a1b5-43ec-b64c-e0624d935af5" style="width:487px"/></a><figcaption><span class="SemanticStringArray"></span></figcaption></figure></div></div><div id="https://www.notion.so/d2bec0ccbed24aa0a634a5f8f5916800" class="Column" style="width:calc((100% - var(--column-spacing) * 1) * 0.5)"><div id="https://www.notion.so/75e27f75cb054ddc9ce488af03b63592" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">得打结果如下，xy先加后转化时溢出带来错误</span></span></p></div><div id="https://www.notion.so/093c3de198ad463abea47625cac319f8" class="Image Image--Normal"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2Fdd719a06-a4c3-47e4-9b49-3a2adc703adc%2F3464b64c-3253-41a7-b8e1-0792fe314b58%2FUntitled.png?width=268&amp;table=block&amp;id=093c3de1-98ad-463a-bea4-7625cac319f8"><img src="https://www.notion.so/signed/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2Fdd719a06-a4c3-47e4-9b49-3a2adc703adc%2F3464b64c-3253-41a7-b8e1-0792fe314b58%2FUntitled.png?width=268&amp;table=block&amp;id=093c3de1-98ad-463a-bea4-7625cac319f8" style="width:268px"/></a><figcaption><span class="SemanticStringArray"></span></figcaption></figure></div></div></div><div id="https://www.notion.so/86f496f7be0b475ca4b2ff091a853072" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">C. dx + dy + dz == dz + dy + dx
</strong></span><span class="SemanticString"><span class="SemanticString__Fragment SemanticString__Fragment--Unknown">正确</span></span><span class="SemanticString">，在本例中，由于double类变量由int类变量转化而来，最大值不超过TMax32，在double类型中，即使3个Tmax32相加也不会出现舍入。
但是对于可取任意double类型范围的变量，存在舍入的极端情况,举例：</span></span></p></div><div id="https://www.notion.so/ec69c77175b04512a59b65e88c9c973e" class="ColumnList"><div id="https://www.notion.so/5fcf51e4f2184f6691abf2b3f52f44c0" class="Column" style="width:calc((100% - var(--column-spacing) * 1) * 0.5)"><div id="https://www.notion.so/2d8f2fbfff01460e9944e661258e2a80" class="Image Image--Normal"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2Fdd719a06-a4c3-47e4-9b49-3a2adc703adc%2F867cf86d-d59e-4ace-9d6a-d25514273407%2FUntitled.png?width=429&amp;table=block&amp;id=2d8f2fbf-ff01-460e-9944-e661258e2a80"><img src="https://www.notion.so/signed/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2Fdd719a06-a4c3-47e4-9b49-3a2adc703adc%2F867cf86d-d59e-4ace-9d6a-d25514273407%2FUntitled.png?width=429&amp;table=block&amp;id=2d8f2fbf-ff01-460e-9944-e661258e2a80" style="width:429px"/></a><figcaption><span class="SemanticStringArray"></span></figcaption></figure></div></div><div id="https://www.notion.so/5e24d6c85179490ba53ca7935d47e26a" class="Column" style="width:calc((100% - var(--column-spacing) * 1) * 0.5)"><div id="https://www.notion.so/e8863c06a5d5465b905098aea3cf0bbd" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">现加上较小的数dz时，</span></span></p></div><div id="https://www.notion.so/f561435f62084e869e4859f5830b551f" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">dz会被舍入</span></span></p></div><div id="https://www.notion.so/912be9f4e0294be2b7fea8d5cb946cdd" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">说明浮点数不满足加法结合律</span></span></p></div><div id="https://www.notion.so/cea52cd4c8aa49e8a58c1fca0c86bc9d" class="Image Image--Normal"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2Fdd719a06-a4c3-47e4-9b49-3a2adc703adc%2F4a9b9524-d1e7-4154-bf30-a465e8b36315%2FUntitled.png?width=218&amp;table=block&amp;id=cea52cd4-c8aa-49e8-a58c-1fca0c86bc9d"><img src="https://www.notion.so/signed/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2Fdd719a06-a4c3-47e4-9b49-3a2adc703adc%2F4a9b9524-d1e7-4154-bf30-a465e8b36315%2FUntitled.png?width=218&amp;table=block&amp;id=cea52cd4-c8aa-49e8-a58c-1fca0c86bc9d" style="width:218px"/></a><figcaption><span class="SemanticStringArray"></span></figcaption></figure></div></div></div><div id="https://www.notion.so/dc194775f4a04652839c61715ff9e957" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">D. dx * dy * dz == dz * dy * dx
</strong></span><span class="SemanticString"><span class="SemanticString__Fragment SemanticString__Fragment--Unknown">错误</span></span><span class="SemanticString">，在本例中，若dx，dy，dz分别为2147483647(Tmax32),2147483646(Tmax32-1),2147483645(Tmax32-2)这类极大的值，相乘时尾数部分相加，由于尾数部分很大，将会发生舍入，最终可能造成错误，这与编译器采取何种方式的优化舍入处理有关。</span></span></p></div><div id="https://www.notion.so/24b3caa4c3a249b499b303d4a5114348" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">E. dx / dx == dy / dy
</strong></span><span class="SemanticString"><span class="SemanticString__Fragment SemanticString__Fragment--Unknown">错误</span></span><span class="SemanticString">，若dx或dy中仅有一方为0，判断结果将为0</span></span></p></div><div id="https://www.notion.so/051131259a334368bceac0a4555b0dd9" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div></article>
  <footer class="Footer">
  <div>&copy; 这儿是什么地方 2022</div>
  <div>&centerdot;</div>
  <div>Powered by <a href="https://github.com/dragonman225/notablog" target="_blank"
      rel="noopener noreferrer">Notablog</a>.
  </div>
</footer>
</body>

</html>