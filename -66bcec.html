<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<!-- iOS Safari -->
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<!-- Chrome, Firefox OS and Opera Status Bar Color -->
<meta name="theme-color" content="#FFFFFF">
<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css">
<link rel="stylesheet" type="text/css"
  href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.19.0/themes/prism.min.css">
<link rel="stylesheet" type="text/css" href="css/SourceSansPro.css">
<link rel="stylesheet" type="text/css" href="css/theme.css">
<link rel="stylesheet" type="text/css" href="css/notablog.css">
<!-- Favicon -->

  <link rel="shortcut icon" href="https://www.notion.so/signed/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2Fdd719a06-a4c3-47e4-9b49-3a2adc703adc%2F10daba46-51b9-474a-9c22-1222e6e158b2%2FPMI74K6FO73MCR770JT.png?table=collection&amp;id=51a399fe-3ada-47de-a312-8e2ad5e56579">

<style>
  :root {
    font-size: 20px;
  }
</style>
  <title>操作系统课程笔记&nbsp;|&nbsp;这儿是什么地方</title>
  <meta property="og:type" content="blog">
  <meta property="og:title" content="操作系统课程笔记">
  
  
    <meta property="og:image" content="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text text-anchor=%22middle%22 dominant-baseline=%22middle%22 x=%2250%22 y=%2255%22 font-size=%2280%22&gt;🎃&lt;/text&gt;&lt;/svg&gt;">
  
  <style>
    .DateTagBar {
      margin-top: 1.0rem;
    }
  </style>
</head>

<body>
  <nav class="Navbar">
  <a href="index.html">
    <div class="Navbar__Btn">
      
        <span><img class="inline-img-icon" src="https://www.notion.so/signed/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2Fdd719a06-a4c3-47e4-9b49-3a2adc703adc%2F10daba46-51b9-474a-9c22-1222e6e158b2%2FPMI74K6FO73MCR770JT.png?table=collection&amp;id=51a399fe-3ada-47de-a312-8e2ad5e56579"></span>&nbsp;
      
      <span>SixGoogle</span>
    </div>
  </a>
  
    
  
    
      <span class="Navbar__Delim">&centerdot;</span>
      <a href="about.html">
        <div class="Navbar__Btn">
          
            <span><img class="inline-img-icon" src="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text text-anchor=%22middle%22 dominant-baseline=%22middle%22 x=%2250%22 y=%2255%22 font-size=%2280%22&gt;😀&lt;/text&gt;&lt;/svg&gt;"></span>&nbsp;
          
          <span>About me?</span>
        </div>
      </a>
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
</nav>

  <header class="Header">
    
    <div class="Header__Spacer Header__Spacer--NoCover">
    </div>
    
      <div class="Header__Icon">
        <span><img class="inline-img-icon" src="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text text-anchor=%22middle%22 dominant-baseline=%22middle%22 x=%2250%22 y=%2255%22 font-size=%2280%22&gt;🎃&lt;/text&gt;&lt;/svg&gt;"></span>
      </div>
    
    <h1 class="Header__Title">操作系统课程笔记</h1>
    
      <div class="DateTagBar">
        
        
          <span class="DateTagBar__Item DateTagBar__Tag DateTagBar__Tag--pink">
            <a href="tag/怎么这么绕.html">怎么这么绕</a>
          </span>
        
      </div>
    
  </header>
  <article id="https://www.notion.so/66bcece4921d4d66b4c5332235cf568b" class="PageRoot"><ul id="https://www.notion.so/8f8086ccdd09408589077ab22c52c564" class="ColorfulBlock ColorfulBlock--ColorGray TableOfContents"><li class="TableOfContents__Item"><a href="#https://www.notion.so/4f8dd324a7bf4a369a282f153f2e39f5"><div style="margin-left:0px"><span class="SemanticStringArray"><span class="SemanticString">虚拟化 virtualization</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/ba2c120fe17f4bb18fff34704500f351"><div style="margin-left:24px"><span class="SemanticStringArray"><span class="SemanticString">进程管理（虚拟化CPU）</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/29f8b54853394135b6ec705d7c6ccb3c"><div style="margin-left:48px"><span class="SemanticStringArray"><span class="SemanticString">抽象：进程</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/2ef18b6c4fc9441a92b5a7949401eb54"><div style="margin-left:48px"><span class="SemanticStringArray"><span class="SemanticString">进程API</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/57c45566fa1a46de9c74d0c5644111ec"><div style="margin-left:48px"><span class="SemanticStringArray"><span class="SemanticString">进程API续（一些常见应用）</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/7f8fe314826c4dc8b57dff112ab0fbaf"><div style="margin-left:48px"><span class="SemanticStringArray"><span class="SemanticString">机制：受限直接执行</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/ea02c9aea4c1421caaebbf963e77abfe"><div style="margin-left:48px"><span class="SemanticStringArray"><span class="SemanticString">进程调度
</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/d943c6f477954221ba404388e0c0d49f"><div style="margin-left:24px"><span class="SemanticStringArray"><span class="SemanticString">内存管理（虚拟化内存）</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/f008e73a3e3a4fbfa411193f14e4a2f2"><div style="margin-left:0px"><span class="SemanticStringArray"><span class="SemanticString">并发</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/b2bd23fee9b74397a007426291e66a3a"><div style="margin-left:24px"><span class="SemanticStringArray"><span class="SemanticString">锁</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/f6e50fc27ee94841847bcf194fa0b5ce"><div style="margin-left:24px"><span class="SemanticStringArray"><span class="SemanticString">条件变量</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/285d0445013447839bc6f68b1b34b648"><div style="margin-left:24px"><span class="SemanticStringArray"><span class="SemanticString">信号量</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/9d46ae1f92a543f28d6741e9e19af03b"><div style="margin-left:0px"><span class="SemanticStringArray"><span class="SemanticString">持久性</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/303a7fe9c7154d048962668279fb913f"><div style="margin-left:24px"><span class="SemanticStringArray"><span class="SemanticString">I/O设备</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/cdc448590ade4cae86a083cf3a139646"><div style="margin-left:24px"><span class="SemanticStringArray"><span class="SemanticString">磁盘管理</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/5f5438f30e2e435580b7735dfdbac5d0"><div style="margin-left:24px"><span class="SemanticStringArray"><span class="SemanticString">文件系统</span></span></div></a></li></ul><h1 id="https://www.notion.so/4f8dd324a7bf4a369a282f153f2e39f5" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--1"><a class="Anchor" href="#https://www.notion.so/4f8dd324a7bf4a369a282f153f2e39f5"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">虚拟化 virtualization</span></span></h1><div id="https://www.notion.so/e7828ddf108546c784b6abef003c8b35" class="Divider"></div><h2 id="https://www.notion.so/ba2c120fe17f4bb18fff34704500f351" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/ba2c120fe17f4bb18fff34704500f351"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">进程管理（虚拟化CPU）</span></span></h2><h3 id="https://www.notion.so/29f8b54853394135b6ec705d7c6ccb3c" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/29f8b54853394135b6ec705d7c6ccb3c"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">抽象：进程</span></span></h3><div id="https://www.notion.so/f8a35bd7055f410f813446d9ec558d9c" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">进程可简单理解为运行中的程序，程序是指令的有序集合，没有任何执行的含义，而进程则强调的是执行过程，它动态被创建、执行和消亡。不同的进程可以来自于同一程序，只要该程序所对应的数据集不同。</span></span></p></div><div id="https://www.notion.so/6e3e92d647cc4933b3de94fe23967b6c" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">进程是</span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorYellow">运行程序的主要操作系统抽象</mark></span><span class="SemanticString">。在任何时间点，进程都可以用它的状态来描述:地址空间中内存的内容，CPU寄存器的内容(包括程序计数器和堆栈指针等)，以及关于I/O的信息(如可读或可写的打开文件)。</span></span></p></div><div id="https://www.notion.so/b11e2f9d769a425aa1bed0e0f53e436f" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">虚拟化cpu的实现，通过让一个进程只运行一个时间片，然后切换到其他进程，提供存在多个虚拟cpu的假象（时分共享CPU技术，对应的磁盘空间是空分共享资源）</span></span></p></div><div id="https://www.notion.so/d383149beaac449cbf54d8540d18dd52" class="Image Image--Normal"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2Fdd719a06-a4c3-47e4-9b49-3a2adc703adc%2Fc6672b7b-8bd7-4987-b463-70eb46f9778f%2FUntitled.png?width=689&amp;table=block&amp;id=d383149b-eaac-449c-bf54-d8540d18dd52"><img src="https://www.notion.so/signed/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2Fdd719a06-a4c3-47e4-9b49-3a2adc703adc%2Fc6672b7b-8bd7-4987-b463-70eb46f9778f%2FUntitled.png?width=689&amp;table=block&amp;id=d383149b-eaac-449c-bf54-d8540d18dd52" style="width:689px"/></a><figcaption><span class="SemanticStringArray"></span></figcaption></figure></div><h3 id="https://www.notion.so/2ef18b6c4fc9441a92b5a7949401eb54" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/2ef18b6c4fc9441a92b5a7949401eb54"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">进程API</span></span></h3><ol class="NumberedListWrapper"><li id="https://www.notion.so/b0d21a841b8e4df0b801bb460ce07549" class="NumberedList" value="1"><span class="SemanticStringArray"><span class="SemanticString">创建create</span></span><div id="https://www.notion.so/f0b44f5dcccd41a5bf4263e29b61e328" class="Image Image--Normal"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2Fdd719a06-a4c3-47e4-9b49-3a2adc703adc%2Ff247edf6-c501-47c1-b346-6abb2f5e3a88%2FUntitled.png?width=392&amp;table=block&amp;id=f0b44f5d-cccd-41a5-bf42-63e29b61e328"><img src="https://www.notion.so/signed/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2Fdd719a06-a4c3-47e4-9b49-3a2adc703adc%2Ff247edf6-c501-47c1-b346-6abb2f5e3a88%2FUntitled.png?width=392&amp;table=block&amp;id=f0b44f5d-cccd-41a5-bf42-63e29b61e328" style="width:392px"/></a><figcaption><span class="SemanticStringArray"></span></figcaption></figure></div><div id="https://www.notion.so/ee0120ceba3347c8bec2f8ab127e4fe4" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">运行程序的第一步：将代码，动态数据从磁盘加载到内存，加载到进程的地址空间
一旦代码和静态数据加载到内存中。
必须为程序的运行时堆栈(或仅仅是堆栈)分配一些内存。c程序使用堆栈存储局部变量、函数参数和返回地址;
操作系统分配这些内存并将其分配给进程。
操作系统也可能会用参数初始化堆栈;
具体来说，它将填充main()函数的参数，即argc和argv数组。</span></span></p></div><div id="https://www.notion.so/15a15a5dbfe846509e6a76c0fbb690a2" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">此外还有：销毁destroy，   等待wait，   其他控制miscellaneous  暂停，恢复等，   状态statu</span></span></p></div></li><li id="https://www.notion.so/bdb68bd4ba4f4b798251deac851a366b" class="NumberedList" value="2"><span class="SemanticStringArray"><span class="SemanticString">进程状态</span></span></li></ol><div id="https://www.notion.so/132a60239df44373b2166344b72fdd14" class="ColumnList"><div id="https://www.notion.so/07cdd4e279a4430c8d4fd24fcb329f5e" class="Column" style="width:calc((100% - var(--column-spacing) * 1) * 0.5)"><div id="https://www.notion.so/f0d03ea1e7b5406fa2b79c8a61980ab7" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">进程从执行到阻塞为主动的</span></span></p></div><div id="https://www.notion.so/82ca95d9631048858b99f4b2c858bcae" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">进程从阻塞到就绪是被动的</span></span></p></div><ul class="BulletedListWrapper"><li id="https://www.notion.so/1219e7c28dba4098bc982928f66451c5" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">运行running</span></span></li><li id="https://www.notion.so/64b2d69923c743ee83aff49b7ced1ef1" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">就绪ready</span></span></li><li id="https://www.notion.so/cc0d28bcd20241cb9af8f8f39ea1d10d" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">阻塞blocked</span></span><div id="https://www.notion.so/93970ae5cb9d4a34a5cdf2fde02b5e6c" class="Image Image--Normal"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2Fdd719a06-a4c3-47e4-9b49-3a2adc703adc%2F5a230160-bfe6-452c-85b5-aa4444800f00%2FUntitled.png?width=240&amp;table=block&amp;id=93970ae5-cb9d-4a34-a5cd-f2fde02b5e6c"><img src="https://www.notion.so/signed/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2Fdd719a06-a4c3-47e4-9b49-3a2adc703adc%2F5a230160-bfe6-452c-85b5-aa4444800f00%2FUntitled.png?width=240&amp;table=block&amp;id=93970ae5-cb9d-4a34-a5cd-f2fde02b5e6c" style="width:240px"/></a><figcaption><span class="SemanticStringArray"></span></figcaption></figure></div></li></ul></div><div id="https://www.notion.so/593475afe5be45358f058302ba43492d" class="Column" style="width:calc((100% - var(--column-spacing) * 1) * 0.5)"><div id="https://www.notion.so/685e6e5c9a164133981d12d41174b75a" class="Image Image--PageWidth"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2Fdd719a06-a4c3-47e4-9b49-3a2adc703adc%2F50463ad4-c316-46cc-8f29-db5cecd3d6d0%2FUntitled.png?width=1051&amp;table=block&amp;id=685e6e5c-9a16-4133-981d-12d41174b75a"><img src="https://www.notion.so/signed/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2Fdd719a06-a4c3-47e4-9b49-3a2adc703adc%2F50463ad4-c316-46cc-8f29-db5cecd3d6d0%2FUntitled.png?width=1051&amp;table=block&amp;id=685e6e5c-9a16-4133-981d-12d41174b75a" style="width:100%"/></a><figcaption><span class="SemanticStringArray"></span></figcaption></figure></div><div id="https://www.notion.so/bbe1333b7ab94a95adc7af4205939ff1" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div></div></div><div id="https://www.notion.so/40a68a4cfe764099ac953175e672e0e3" class="ColumnList"><div id="https://www.notion.so/54c4f6602c904a9f8e99051c41716681" class="Column" style="width:calc((100% - var(--column-spacing) * 1) * 1)"><ol class="NumberedListWrapper"><li id="https://www.notion.so/e43484f4c4124a2cb7cd55e4b2ec7433" class="NumberedList" value="1"><span class="SemanticStringArray"><span class="SemanticString">OS中有许多数据结构，如进程列表：包含系统中所有进程的信息，进程控制块process control block PCB：储存关于进程的信息的个体结构</span></span></li></ol><div id="https://www.notion.so/aca635466cd44e5487cde64e71888aa3" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div></div><div id="https://www.notion.so/3a3633f7bb074dbd8ef8f5ba3f1ecd6e" class="Column" style="width:calc((100% - var(--column-spacing) * 1) * 1)"><div id="https://www.notion.so/f9ed612bfac84b97ac9ddb757c48c8c6" class="Image Image--Normal"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2Fdd719a06-a4c3-47e4-9b49-3a2adc703adc%2F0d92b4de-80bb-4361-b83e-5594b1c85e78%2FUntitled.png?width=468&amp;table=block&amp;id=f9ed612b-fac8-4b97-ac9d-db757c48c8c6"><img src="https://www.notion.so/signed/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2Fdd719a06-a4c3-47e4-9b49-3a2adc703adc%2F0d92b4de-80bb-4361-b83e-5594b1c85e78%2FUntitled.png?width=468&amp;table=block&amp;id=f9ed612b-fac8-4b97-ac9d-db757c48c8c6" style="width:468px"/></a><figcaption><span class="SemanticStringArray"></span></figcaption></figure></div></div></div><h3 id="https://www.notion.so/57c45566fa1a46de9c74d0c5644111ec" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/57c45566fa1a46de9c74d0c5644111ec"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">进程API续（一些常见应用）</span></span></h3><ol class="NumberedListWrapper"><li id="https://www.notion.so/85120c839db64ab990d72753e9b07f5f" class="NumberedList" value="1"><span class="SemanticStringArray"><span class="SemanticString">fork()
创建新的进程
fork的实现分为以下两步
1. 复制进程资源（代码段继续共享父进程的物理空间（</span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorYellow">两者的代码完全相同，子进程从fork()后继续执行</mark></span><span class="SemanticString">），内核会给子进程的数据段、堆栈段分配相应的物理空间）
2. 执行该进程（加入就绪队列）
</span></span></li><li id="https://www.notion.so/79c62ae9142a44ad80a90acdb065f988" class="NumberedList" value="2"><span class="SemanticStringArray"><span class="SemanticString">wait()
延迟当前进程执行,调用其的进程将进入阻塞态
添加与父进程相关概念</span></span></li></ol><pre id="https://www.notion.so/62ce59cada3b43df950b27322a471c27" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token class-name">pid_t</span> <span class="token function">wait</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token operator">*</span>wstatus<span class="token punctuation">)</span><span class="token punctuation">;</span>   
<span class="token comment">// 功能：等待任意一个子进程结束，如果任意一个子进程结束了，此函数会回收子进程   </span>
<span class="token comment">// 参数：int*  wstatus   进程退出时的状态信息，传入的是一个int类型的地址，是传出参数。</span>
<span class="token comment">//返回值：-成功：返回被回收的子进程的id    -失败：-1      </span></span></span></span></code></pre><ol class="NumberedListWrapper"><li id="https://www.notion.so/5e666acb30c24d47b892243bf2ce2fed" class="NumberedList" value="1"><span class="SemanticStringArray"><span class="SemanticString">exec()</span></span></li></ol><div id="https://www.notion.so/2214680dcd7044c1873f215e5ba30a01" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">使用fork()创建子进程后常用exec系列的函数来将子进程替换为新的进程。</span></span></p></div><div id="https://www.notion.so/221405622814474d8a093a91da107675" class="ColorfulBlock ColorfulBlock--BgGray Callout"><div class="Callout__Icon"><div class="Icon">💡</div></div><p class="Callout__Content"><span class="SemanticStringArray"><span class="SemanticString">为何设计这些exec函数</span></span><div id="https://www.notion.so/f9beac93f8d34150b433ea7a3d4ae567" class="ColorfulBlock ColorfulBlock--BgGray Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">这种分离 fork()及 exec()的做法在构建 UNIX shell 的时候非常有用，因为这给了 shell 在fork 之后 exec 之前运行代码的机会，这些代码可以在运行新程序前改变环境，从而让一系列有趣的功能很容易实现。</span></span></p></div></p></div><div id="https://www.notion.so/5b5a82f76a3844c686aed8391f1489ef" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><em class="SemanticString__Fragment SemanticString__Fragment--Italic"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">貌似要重点关注书上32,33,34页？</strong></em></span></span></p></div><h3 id="https://www.notion.so/7f8fe314826c4dc8b57dff112ab0fbaf" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/7f8fe314826c4dc8b57dff112ab0fbaf"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">机制：受限直接执行</span></span></h3><div id="https://www.notion.so/515020007fe644e2988d44b316747795" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><h3 id="https://www.notion.so/ea02c9aea4c1421caaebbf963e77abfe" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/ea02c9aea4c1421caaebbf963e77abfe"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">进程调度
</span></span></h3><h2 id="https://www.notion.so/d943c6f477954221ba404388e0c0d49f" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/d943c6f477954221ba404388e0c0d49f"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">内存管理（虚拟化内存）</span></span></h2><h1 id="https://www.notion.so/f008e73a3e3a4fbfa411193f14e4a2f2" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--1"><a class="Anchor" href="#https://www.notion.so/f008e73a3e3a4fbfa411193f14e4a2f2"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">并发</span></span></h1><h2 id="https://www.notion.so/b2bd23fee9b74397a007426291e66a3a" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/b2bd23fee9b74397a007426291e66a3a"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">锁</span></span></h2><h2 id="https://www.notion.so/f6e50fc27ee94841847bcf194fa0b5ce" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/f6e50fc27ee94841847bcf194fa0b5ce"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">条件变量</span></span></h2><h2 id="https://www.notion.so/285d0445013447839bc6f68b1b34b648" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/285d0445013447839bc6f68b1b34b648"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">信号量</span></span></h2><h1 id="https://www.notion.so/9d46ae1f92a543f28d6741e9e19af03b" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--1"><a class="Anchor" href="#https://www.notion.so/9d46ae1f92a543f28d6741e9e19af03b"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">持久性</span></span></h1><h2 id="https://www.notion.so/303a7fe9c7154d048962668279fb913f" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/303a7fe9c7154d048962668279fb913f"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">I/O设备</span></span></h2><h2 id="https://www.notion.so/cdc448590ade4cae86a083cf3a139646" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/cdc448590ade4cae86a083cf3a139646"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">磁盘管理</span></span></h2><h2 id="https://www.notion.so/5f5438f30e2e435580b7735dfdbac5d0" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/5f5438f30e2e435580b7735dfdbac5d0"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">文件系统</span></span></h2></article>
  <footer class="Footer">
  <div>&copy; 这儿是什么地方 2022</div>
  <div>&centerdot;</div>
  <div>Powered by <a href="https://github.com/dragonman225/notablog" target="_blank"
      rel="noopener noreferrer">Notablog</a>.
  </div>
</footer>
</body>

</html>